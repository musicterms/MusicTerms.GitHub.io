<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Terminology</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>

<body>
    <nav>
        <font id="nav-text">User Argreement</font>
    </nav>
    <div class="page bug" id="page-1">
        <div class="content" style="margin-bottom: 10rem;">
            <h2 class="center margin-4" id="intrusct"></h2>
            <div id="terms"></div>
        </div>
    </div>
    <script>

    </script>
    <script src="/js/index.js"></script>
    <script src="/js/events.js"></script>
    <script src="/js/icon.js"></script>
    <script src="https://alphabrate.github.io/trueview/markdown.js"></script>
    <script>
        var localstorage = window.localStorage;
        var lang = localstorage.getItem('language');
        if (lang == null || lang == 'en') {
            lang = '';
        }
        if (lang != '') {
            lang = "." + lang;
        }

        var urlPrivacy = '/terms/privacy' + lang + '.md';
        var urlConditions = '/terms/conditions' + lang + '.md';

        var agree = 'I Agree.';
        var back = 'Go Back.'
        var l = {
            "I Agree.": {
                ".zh": "我同意",
                ".zh-CN": "我同意",
                "": "I Agree."
            },
            "Go Back.": {
                ".zh": "返回",
                ".zh-CN": "返回",
                "": "Go Back."
            },
            "Intrusction": {
                "": `<span class="nowrap">By using this Web App,</span> you agree with our <span
                    class="nowrap">Privacy Terms</span> & <span class="nowrap">Terms of Service</span>:`,
                ".zh": `<span class="nowrap">使用此網頁應用程式即表示您同意我們的</span><span class="nowrap">隱私權條款</span>和<span
                     class="nowrap">服務條款</span>：`,
                ".zh-CN": `<span class="nowrap">使用此网页应用程序即表示您同意我们的</span><span class="nowrap">隐私条款</span>和<span
                    class="nowrap">服务条款</span>：`,
            },
        }
        agree = l[agree][lang];
        back = l[back][lang];
        document.getElementById('intrusct').innerHTML = l['Intrusction'][lang];

        function one() {
            document.getElementById('terms').style.opacity = 0;
            document.getElementById('page-1').scrollTop = 0;
            fetch(urlPrivacy)
                .then(response => response.text())
                .then(text => {
                    setTimeout(() => {
                        document.getElementById('terms').innerHTML = marked.parse(text);
                        document.getElementById('terms').innerHTML += `<button class="mid-btn" onclick="two()">${agree}</button>`
                        document.getElementById('terms').style.opacity = 1;
                    }, 300)
                });
        }

        function two() {
            document.getElementById('terms').style.opacity = 0;
            document.getElementById('page-1').scrollTop = 0;
            fetch(urlConditions)
                .then(response => response.text())
                .then(text => {
                    document.getElementById('terms').innerHTML = `<button class="mid-btn" onclick="one()">${back}</button>` + marked.parse(text);
                    document.getElementById('terms').innerHTML += `<button class="mid-btn" onclick="one()">${back}</button><button class="mid-btn" onclick="done()">${agree}</button>`
                    document.getElementById('terms').style.opacity = 1;
                });
        }

        function done() {
            document.getElementById('terms').style.opacity = 0;
            setTimeout(() => {
                localstorage.setItem('agreed', 'true');
                window.location.href = '/index.html?redirect=no-delay';
            }, 400);
            
        }

        one();
    </script>
</body>

</html>